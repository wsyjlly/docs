<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>YSW-NOTE</title>
    <meta name="description" content="晏沈威的笔记">
    <link rel="icon" href="/assets/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.2749efcc.css" as="style"><link rel="preload" href="/assets/js/app.2d4845b5.js" as="script"><link rel="preload" href="/assets/js/2.974af1fb.js" as="script"><link rel="preload" href="/assets/js/10.48cab603.js" as="script"><link rel="prefetch" href="/assets/js/11.652fa16d.js"><link rel="prefetch" href="/assets/js/12.b0608426.js"><link rel="prefetch" href="/assets/js/13.e9415f24.js"><link rel="prefetch" href="/assets/js/14.dde1bec7.js"><link rel="prefetch" href="/assets/js/15.8b695c03.js"><link rel="prefetch" href="/assets/js/16.647cd73d.js"><link rel="prefetch" href="/assets/js/17.af05518d.js"><link rel="prefetch" href="/assets/js/18.b0600c14.js"><link rel="prefetch" href="/assets/js/19.953b459c.js"><link rel="prefetch" href="/assets/js/20.e2a7f6e3.js"><link rel="prefetch" href="/assets/js/21.60a88409.js"><link rel="prefetch" href="/assets/js/22.d40553da.js"><link rel="prefetch" href="/assets/js/23.eea7414f.js"><link rel="prefetch" href="/assets/js/24.1c179723.js"><link rel="prefetch" href="/assets/js/25.a116c32f.js"><link rel="prefetch" href="/assets/js/26.93e18f12.js"><link rel="prefetch" href="/assets/js/27.e703db15.js"><link rel="prefetch" href="/assets/js/28.9d5a600f.js"><link rel="prefetch" href="/assets/js/29.ec56e0f7.js"><link rel="prefetch" href="/assets/js/3.b9e90bed.js"><link rel="prefetch" href="/assets/js/30.3419dbef.js"><link rel="prefetch" href="/assets/js/31.5541885c.js"><link rel="prefetch" href="/assets/js/4.383e9253.js"><link rel="prefetch" href="/assets/js/5.29032b90.js"><link rel="prefetch" href="/assets/js/6.3374be4e.js"><link rel="prefetch" href="/assets/js/7.8d4d8ec7.js"><link rel="prefetch" href="/assets/js/8.d15a2d70.js"><link rel="prefetch" href="/assets/js/9.4b953eaf.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2749efcc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">YSW-NOTE</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Java笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/SpringBoot.html" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/Java/MybatisPlus.html" class="nav-link">MybatisPlus</a></li><li class="dropdown-item"><!----> <a href="/Java/Java基础.html" class="nav-link">Java基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Docker笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docker/docker命令.html" class="nav-link">docker命令</a></li><li class="dropdown-item"><!----> <a href="/Docker/软件安装.html" class="nav-link">软件安装</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web/Html标签.html" class="nav-link">Html标签</a></li><li class="dropdown-item"><!----> <a href="/Web/CSS3属性.html" class="nav-link">CSS3属性</a></li><li class="dropdown-item"><!----> <a href="/Web/Vue.html" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Something</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Other/12306.html" class="nav-link">12306</a></li><li class="dropdown-item"><!----> <a href="/Other/CentOS 7.html" class="nav-link">CentOS 7</a></li><li class="dropdown-item"><!----> <a href="/Other/Git.html" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/Other/sfow项目部署.html" class="nav-link">SFOW</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Java笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Java/SpringBoot.html" class="nav-link">SpringBoot</a></li><li class="dropdown-item"><!----> <a href="/Java/MybatisPlus.html" class="nav-link">MybatisPlus</a></li><li class="dropdown-item"><!----> <a href="/Java/Java基础.html" class="nav-link">Java基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Docker笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Docker/docker命令.html" class="nav-link">docker命令</a></li><li class="dropdown-item"><!----> <a href="/Docker/软件安装.html" class="nav-link">软件安装</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端笔记</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Web/Html标签.html" class="nav-link">Html标签</a></li><li class="dropdown-item"><!----> <a href="/Web/CSS3属性.html" class="nav-link">CSS3属性</a></li><li class="dropdown-item"><!----> <a href="/Web/Vue.html" class="nav-link">Vue</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Something</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Other/12306.html" class="nav-link">12306</a></li><li class="dropdown-item"><!----> <a href="/Other/CentOS 7.html" class="nav-link">CentOS 7</a></li><li class="dropdown-item"><!----> <a href="/Other/Git.html" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/Other/sfow项目部署.html" class="nav-link">SFOW</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker笔记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Docker/docker命令.html" class="active sidebar-link">docker命令</a></li><li><a href="/Docker/软件安装.html" class="sidebar-link">软件安装</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><div class="language-docker extra-class"><pre class="language-docker"><code><span class="token comment"># 安装docker</span>
yum install docker
docker ps <span class="token punctuation">-</span>a
docker images
docker run image
docker build
docker start/stop/rm container
docker exec


<span class="token comment"># Redis安装</span>
docker pull redis<span class="token punctuation">:</span>4.0
docker run <span class="token punctuation">-</span>d <span class="token punctuation">-</span><span class="token punctuation">-</span>name=<span class="token string">&quot;redis01&quot;</span> <span class="token punctuation">-</span>v /ysw/redis/data<span class="token punctuation">:</span>/data  <span class="token punctuation">-</span>p 6379<span class="token punctuation">:</span>6379 redis<span class="token punctuation">:</span>4.0 redis<span class="token punctuation">-</span>serser <span class="token punctuation">-</span><span class="token punctuation">-</span>appendonly yes <span class="token punctuation">-</span><span class="token punctuation">-</span>requirepass <span class="token string">&quot;root@234&quot;</span>
docker exec <span class="token punctuation">-</span>it redis01 redis<span class="token punctuation">-</span>cli <span class="token punctuation">-</span>h 127.0.0.1 <span class="token punctuation">-</span>p 6379 <span class="token punctuation">-</span>a root@234
docker exec <span class="token punctuation">-</span>it demo01 /bin/bash
docker run <span class="token punctuation">-</span>it <span class="token punctuation">-</span><span class="token punctuation">-</span>name=<span class="token string">&quot;static&quot;</span> <span class="token punctuation">-</span>v /ysw/app/data<span class="token punctuation">:</span>/ysw/app/uploadFiles <span class="token punctuation">-</span>p 80<span class="token punctuation">:</span>8080 demo05<span class="token punctuation">:</span>static
docker run <span class="token punctuation">-</span>it <span class="token punctuation">-</span><span class="token punctuation">-</span>name demo01 <span class="token punctuation">-</span>p<span class="token punctuation">:</span>8080<span class="token punctuation">:</span>8080 demo01<span class="token punctuation">:</span>1.0
docker exec <span class="token punctuation">-</span>it redis01 redis<span class="token punctuation">-</span>cli <span class="token punctuation">-</span>h 127.0.0.1 <span class="token punctuation">-</span>p 6379 <span class="token punctuation">-</span>a root@234
docker exec <span class="token punctuation">-</span>it demo01 /bin/bash

<span class="token comment"># MYSQL</span>
docker run <span class="token punctuation">-</span><span class="token punctuation">-</span>name mysql56 <span class="token punctuation">-</span>p 3306<span class="token punctuation">:</span>3306 <span class="token punctuation">-</span>e MYSQL_ROOT_PASSWORD=234 <span class="token punctuation">-</span>d mysql<span class="token punctuation">:</span>5.6 <span class="token punctuation">-</span><span class="token punctuation">-</span>character<span class="token punctuation">-</span>set<span class="token punctuation">-</span>server=utf8 <span class="token punctuation">-</span><span class="token punctuation">-</span>collation<span class="token punctuation">-</span>server=utf8_general_ci
docker run <span class="token punctuation">-</span><span class="token punctuation">-</span>name mysql56 <span class="token punctuation">-</span>v /ysw/mysql/config<span class="token punctuation">:</span>/etc/mysql <span class="token punctuation">-</span>p 3306<span class="token punctuation">:</span>3306 <span class="token punctuation">-</span>e MYSQL_ROOT_PASSWORD=234 <span class="token punctuation">-</span>d mysql<span class="token punctuation">:</span>5.6 <span class="token punctuation">-</span><span class="token punctuation">-</span>character<span class="token punctuation">-</span>set<span class="token punctuation">-</span>server=utf8 <span class="token punctuation">-</span><span class="token punctuation">-</span>collation<span class="token punctuation">-</span>server=utf8_general_ci

<span class="token comment"># 解决外部访问数据中文乱码的问题</span>
SET NAMES <span class="token string">'utf8'</span>;
等同以下三条命令
SET character_set_client = utf8;
SET character_set_results = utf8;
SET character_set_connection = utf8;

配置文件位置：
vim etc/mysql/mysql.conf.d/mysql.cnf
<span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span>
default<span class="token punctuation">-</span>character<span class="token punctuation">-</span>set = utf8
character_set_server = utf8
default<span class="token punctuation">-</span>character<span class="token punctuation">-</span>set = utf8
<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span>
default<span class="token punctuation">-</span>character<span class="token punctuation">-</span>set = utf8
<span class="token punctuation">[</span>mysql.server<span class="token punctuation">]</span>
default<span class="token punctuation">-</span>character<span class="token punctuation">-</span>set = utf8
<span class="token punctuation">[</span>mysqld_safe<span class="token punctuation">]</span>
default<span class="token punctuation">-</span>character<span class="token punctuation">-</span>set = utf8
<span class="token punctuation">[</span>client<span class="token punctuation">]</span>
default<span class="token punctuation">-</span>character<span class="token punctuation">-</span>set = utf8





Dockers容器内使用vim
1.apt<span class="token punctuation">-</span>get update
2.apt<span class="token punctuation">-</span>get install vim 

Docker 命令大全
================================================================
容器生命周期管理
    run创建一个新的容器并运行一个命令
        docker run <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> IMAGE <span class="token punctuation">[</span>COMMAND<span class="token punctuation">]</span> <span class="token punctuation">[</span>ARG<span class="token punctuation">...</span><span class="token punctuation">]</span>
        OPTIONS说明：
            <span class="token punctuation">-</span>a stdin<span class="token punctuation">:</span> 指定标准输入输出内容类型，可选 STDIN/STDOUT/STDERR 三项；
            <span class="token punctuation">-</span>d<span class="token punctuation">:</span> 后台运行容器，并返回容器ID；
            <span class="token punctuation">-</span>i<span class="token punctuation">:</span> 以交互模式运行容器，通常与 <span class="token punctuation">-</span>t 同时使用；
            <span class="token punctuation">-</span>P<span class="token punctuation">:</span> 随机端口映射，容器内部端口随机映射到主机的高端口
            <span class="token punctuation">-</span>p<span class="token punctuation">:</span> 指定端口映射，格式为：主机(宿主)端口<span class="token punctuation">:</span>容器端口
            <span class="token punctuation">-</span>t<span class="token punctuation">:</span> 为容器重新分配一个伪输入终端，通常与 <span class="token punctuation">-</span>i 同时使用；
            <span class="token punctuation">-</span><span class="token punctuation">-</span>name=<span class="token string">&quot;nginx-lb&quot;</span><span class="token punctuation">:</span> 为容器指定一个名称；
            <span class="token punctuation">-</span><span class="token punctuation">-</span>dns 8.8.8.8<span class="token punctuation">:</span> 指定容器使用的DNS服务器，默认和宿主一致；
            <span class="token punctuation">-</span><span class="token punctuation">-</span>dns<span class="token punctuation">-</span>search example.com<span class="token punctuation">:</span> 指定容器DNS搜索域名，默认和宿主一致；
            <span class="token punctuation">-</span>h <span class="token string">&quot;mars&quot;</span><span class="token punctuation">:</span> 指定容器的hostname；
            <span class="token punctuation">-</span>e username=<span class="token string">&quot;ritchie&quot;</span><span class="token punctuation">:</span> 设置环境变量；
            <span class="token punctuation">-</span><span class="token punctuation">-</span>env<span class="token punctuation">-</span>file=<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 从指定文件读入环境变量；
            <span class="token punctuation">-</span><span class="token punctuation">-</span>cpuset=<span class="token string">&quot;0-2&quot;</span> or <span class="token punctuation">-</span><span class="token punctuation">-</span>cpuset=<span class="token string">&quot;0,1,2&quot;</span><span class="token punctuation">:</span> 绑定容器到指定CPU运行；
            <span class="token punctuation">-</span>m <span class="token punctuation">:</span>设置容器使用内存最大值；
            <span class="token punctuation">-</span><span class="token punctuation">-</span>net=<span class="token string">&quot;bridge&quot;</span><span class="token punctuation">:</span> 指定容器的网络连接类型，支持 bridge/host/none/container<span class="token punctuation">:</span> 四种类型；
            <span class="token punctuation">-</span><span class="token punctuation">-</span>link=<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 添加链接到另一个容器；
            <span class="token punctuation">-</span><span class="token punctuation">-</span>expose=<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">:</span> 开放一个端口或一组端口； 
    start/stop/restart
    kill
    rm
    pause/unpause
    create
    exec

容器操作
    ps
    inspect
    top
    attach
    events
    logs
    wait
    export
    port

容器rootfs命令
    commit
    cp
    diff

镜像仓库
    login
    pull
    push
    search

本地镜像管理
    images
    rmi
    tag
    build
    history
    save
    load
    import

info<span class="token punctuation">|</span>version
    info
    version






docker容器使用
================================================================
@       通过命令 docker command <span class="token punctuation">-</span><span class="token punctuation">-</span>help 更深入的了解指定的 Docker 命令使用方法。 
docker stats <span class="token punctuation">-</span><span class="token punctuation">-</span>help 

@       在docker容器中运行一个 Python Flask 应用来运行一个web应用
docker run <span class="token punctuation">-</span>d <span class="token punctuation">-</span>P training/webapp python app.py

@       使用 docker ps 来查看我们正在运行的容器
docker ps

@       使用 docker port 可以查看指定 （ID或者名字）容器的某个确定端口映射到宿主机的端口号
我们创建的web应用容器ID为<span class="token punctuation">:</span>7a38a1ad55c6 名字为：determined_swanson
使用docker port 7a38a1ad55c6 或docker port determined_swanson来查看容器端口的映射情况

@       docker logs <span class="token punctuation">[</span>ID或者名字<span class="token punctuation">]</span> 可以查看容器内部的标准输出。
docker logs <span class="token punctuation">-</span>f 7a38a1ad55c6
<span class="token punctuation">-</span>f<span class="token punctuation">:</span>让 dokcer logs 像使用 tail <span class="token punctuation">-</span>f 一样来输出容器内部的标准输出

@       使用 docker top 来查看容器内部运行的进程
docker top determined_swanson

@       使用 docker inspect 来查看Docker的底层信息。它会返回一个 JSON 文件记录着 Docker 容器的配置和状态信息
docker inspect determined_swanson

@       停止WEB应用容器
docker stop determined_swanson   

@       重启WEB应用容器
已经停止的容器，我们可以使用命令 docker start 来启动
正在运行的容器，我们可以使用 docker restart 命令来重启
docker start determined_swanson
docker restart determined_swanson

@       使用 docker rm 命令来删除不需要的容器，删除容器时，容器必须是停止状态
docker rm determined_swanson  




docker镜像使用
================================================================
@       获取一个新的镜像
当我们在本地主机上使用一个不存在的镜像时 Docker 就会自动下载这个镜像。如果我们想预先下载这个镜像，我们可以使用 docker pull 命令来下载它。
docker pull

@       查找镜像
我们可以从 Docker Hub 网站来搜索镜像，Docker Hub 网址为： https<span class="token punctuation">:</span>//hub.docker.com/
我们也可以使用 docker search 命令来搜索镜像
docker search httpd
NAME<span class="token punctuation">:</span>镜像仓库源的名称
DESCRIPTION<span class="token punctuation">:</span>镜像的描述
OFFICIAL<span class="token punctuation">:</span>是否docker官方发布

@     拖取镜像
我们决定使用上图中的httpd 官方版本的镜像，使用命令 docker pull 来下载镜像。
docker pull httpd

@       使用镜像
docker run httpd

@       创建镜像
当我们从docker镜像仓库中下载的镜像不能满足我们的需求时，我们可以通过以下两种方式对镜像进行更改。
1.从已经创建的容器中更新镜像，并且提交这个镜像
2.使用 Dockerfile 指令来创建一个新的镜像

@       更新镜像
更新镜像之前，我们需要使用镜像来创建一个容器。 
runoob@runoob<span class="token punctuation">:</span>~$ docker run <span class="token punctuation">-</span>t <span class="token punctuation">-</span>i ubuntu<span class="token punctuation">:</span>15.10 /bin/bash
root@e218edb10161<span class="token punctuation">:</span>/<span class="token comment"># </span>
在运行的容器内使用 apt<span class="token punctuation">-</span>get update 命令进行更新。
在完成操作之后，输入 exit命令来退出这个容器。
此时ID为e218edb10161的容器，是按我们的需求更改的容器。我们可以通过命令 docker commit来提交容器副本。
runoob@runoob<span class="token punctuation">:</span>~$ docker commit <span class="token punctuation">-</span>m=<span class="token string">&quot;has update&quot;</span> <span class="token punctuation">-</span>a=<span class="token string">&quot;runoob&quot;</span> e218edb10161 runoob/ubuntu<span class="token punctuation">:</span>v2
sha256<span class="token punctuation">:</span>70bf1840fd7c0d2d8ef0a42a817eb29f854c1af8f7c59fc03ac7bdee9545aff8
各个参数说明：
    <span class="token punctuation">-</span>m<span class="token punctuation">:</span>提交的描述信息
    <span class="token punctuation">-</span>a<span class="token punctuation">:</span>指定镜像作者
    e218edb10161：容器ID
    runoob/ubuntu<span class="token punctuation">:</span>v2<span class="token punctuation">:</span>指定要创建的目标镜像名
我们可以使用 docker images 命令来查看我们的新镜像 runoob/ubuntu<span class="token punctuation">:</span>v2： 
使用我们的新镜像 runoob/ubuntu 来启动一个容器
runoob@runoob<span class="token punctuation">:</span>~$ docker run <span class="token punctuation">-</span>t <span class="token punctuation">-</span>i runoob/ubuntu<span class="token punctuation">:</span>v2 /bin/bash                            
root@1a9fbdeb5da3<span class="token punctuation">:</span>/<span class="token comment">#</span>

@       构建镜像
我们使用命令 docker build ， 从零开始来创建一个新的镜像。为此，我们需要创建一个 Dockerfile 文件，其中包含一组指令来告诉 Docker 如何构建我们的镜像。
runoob@runoob<span class="token punctuation">:</span>~$ cat Dockerfile 
<span class="token keyword">FROM</span>    centos<span class="token punctuation">:</span>6.7
<span class="token keyword">MAINTAINER</span>      Fisher <span class="token string">&quot;fisher@sudops.com&quot;</span>

<span class="token keyword">RUN</span>     /bin/echo <span class="token string">'root:123456'</span> <span class="token punctuation">|</span>chpasswd
<span class="token keyword">RUN</span>     useradd runoob
<span class="token keyword">RUN</span>     /bin/echo <span class="token string">'runoob:123456'</span> <span class="token punctuation">|</span>chpasswd
<span class="token keyword">RUN</span>     /bin/echo <span class="token punctuation">-</span>e <span class="token string">&quot;LANG=\&quot;en_US.UTF-8\&quot;&quot;</span> <span class="token punctuation">&gt;</span>/etc/default/local
<span class="token keyword">EXPOSE</span>  22
<span class="token keyword">EXPOSE</span>  80
<span class="token keyword">CMD</span>     /usr/sbin/sshd <span class="token punctuation">-</span>D

每一个指令都会在镜像上创建一个新的层，每一个指令的前缀都必须是大写的。
第一条FROM，指定使用哪个镜像源
<span class="token keyword">RUN</span> 指令告诉docker 在镜像内执行命令，安装了什么。。。
然后，我们使用 Dockerfile 文件，通过 docker build 命令来构建一个镜像。

runoob@runoob<span class="token punctuation">:</span>~$ docker build <span class="token punctuation">-</span>t runoob/centos<span class="token punctuation">:</span>6.7 .
Sending build context to Docker daemon 17.92 kB
Step 1 <span class="token punctuation">:</span> FROM centos<span class="token punctuation">:</span>6.7
 <span class="token punctuation">---</span>&amp;gt; d95b5ca17cc3
Step 2 <span class="token punctuation">:</span> MAINTAINER Fisher <span class="token string">&quot;fisher@sudops.com&quot;</span>
 <span class="token punctuation">---</span>&amp;gt; Using cache
 <span class="token punctuation">---</span>&amp;gt; 0c92299c6f03
Step 3 <span class="token punctuation">:</span> RUN /bin/echo <span class="token string">'root:123456'</span> <span class="token punctuation">|</span>chpasswd
 <span class="token punctuation">---</span>&amp;gt; Using cache
 <span class="token punctuation">---</span>&amp;gt; 0397ce2fbd0a
Step 4 <span class="token punctuation">:</span> RUN useradd runoob
<span class="token punctuation">...</span><span class="token punctuation">...</span>

参数说明：
    <span class="token punctuation">-</span>t ：指定要创建的目标镜像名
    . ：Dockerfile 文件所在目录，可以指定Dockerfile 的绝对路径
使用docker images 查看创建的镜像已经在列表中存在<span class="token punctuation">,</span>镜像ID为860c279d2fec
我们可以使用新的镜像来创建容器
runoob@runoob<span class="token punctuation">:</span>~$ docker run <span class="token punctuation">-</span>t <span class="token punctuation">-</span>i runoob/centos<span class="token punctuation">:</span>6.7  /bin/bash
<span class="token punctuation">[</span>root@41c28d18b5fb /<span class="token punctuation">]</span><span class="token comment"># id runoob</span>
uid=500(runoob) gid=500(runoob) groups=500(runoob)

我们可以使用 docker tag 命令，为镜像添加一个新的标签。
runoob@runoob<span class="token punctuation">:</span>~$ docker tag 860c279d2fec runoob/centos<span class="token punctuation">:</span>dev
docker tag 镜像ID，这里是 860c279d2fec <span class="token punctuation">,</span>用户名称、镜像源名(repository name)和新的标签名(tag)。
使用 docker images 命令可以看到，ID为860c279d2fec的镜像多一个标签。

@       删除镜像
先停止由镜像创建的容器
docker stop containers
删除由镜像创建的容器
docker rm containers
再删除镜像
docker rmi image

  




docker配置
================================================================
@       配置镜像拉取国内站点：
https<span class="token punctuation">:</span>//registry.docker<span class="token punctuation">-</span>cn.com
http<span class="token punctuation">:</span>//hub<span class="token punctuation">-</span>mirror.c.163.com
https<span class="token punctuation">:</span>//3laho3y3.mirror.aliyuncs.com
http<span class="token punctuation">:</span>//f1361db2.m.daocloud.io
https<span class="token punctuation">:</span>//mirror.ccs.tencentyun.com

<span class="token comment"># 在dockerd后面加参数</span>
ExecStart=/usr/bin/dockerd <span class="token punctuation">-</span><span class="token punctuation">-</span>registry<span class="token punctuation">-</span>mirror=https<span class="token punctuation">:</span>//registry.docker<span class="token punctuation">-</span>cn.com

以上操作后重启一下 Docker
sudo systemctl daemon<span class="token punctuation">-</span>reload
sudo systemctl restart docker
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/Docker/软件安装.html">
          软件安装
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2d4845b5.js" defer></script><script src="/assets/js/2.974af1fb.js" defer></script><script src="/assets/js/10.48cab603.js" defer></script>
  </body>
</html>
